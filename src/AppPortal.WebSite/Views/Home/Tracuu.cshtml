@{
    ViewData["Title"] = "Tracuu";
}
<style>
    #right_sidebar {
        display: none !important;
    }

    .thumbnail {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.5);
        transition: 0.3s;
        min-width: 40%;
        border-radius: 5px;
        padding: 10px;
    }

    .thumbnail-description {
        min-height: 40px;
        height: 60px;
        line-height: 20px;
        overflow: hidden;
    }

    .thumbnail:hover {
        cursor: pointer;
        box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 1);
    }

    .thumbnail-label {
        font-size: 14px !important;
        float: left;
        color: blue;
    }
</style>

<div class="portlet-column portlet-column-only container" id="column-1" style="margin-top: 20px;">
    <div class="container">
        <div class="col-md-8">
            <div class="block">
                <h3 class="block_title_black">Tra cứu</h3>
            </div>
            <div class="portlet-dropzone portlet-column-content portlet-column-content-only" id="layout-column_column-1">
                <div id="p_p_id_tracuupaknaction_WAR_apcapaknportlet_" class="portlet-boundary portlet-boundary_tracuupaknaction_WAR_apcapaknportlet_ portlet-static portlet-static-end portlet-borderless tracuupaknaction-portlet ">
                    <span id="p_tracuupaknaction_WAR_apcapaknportlet"></span>
                    <div class="portlet-body">
                        <div class="portlet-borderless-container" style="">
                            <div class="portlet-body">
                                <div class="box-KN MB20" style="padding: 10px">

                                    <form class="form-horizontal" role="form" method="post" action="https://nguoidan.chinhphu.vn/web/quan-tri-he-thong/tra-cuu-ket-qua?p_p_id=tracuupaknaction_WAR_apcapaknportlet&amp;p_p_lifecycle=0&amp;p_p_state=normal&amp;p_p_mode=view&amp;p_p_col_id=column-1&amp;p_p_col_count=1&amp;_tracuupaknaction_WAR_apcapaknportlet_mvcPath=%2Fhtml%2Ftracuupaknaction%2Fview.jsp&amp;p_auth=xnYz6bfz">
                                        <div class="form-group">
                                            <label for="inputEmail3" class="col-sm-3 control-label">Tên người gửi</label>
                                            <div class="col-sm-9"> <input type="text" class="form-control" id="inputName" placeholder="Nhập tên công dân" name="tenNguoiGui" value=""> </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="inputEmail3" class="col-sm-3 control-label">Email</label>
                                            <div class="col-sm-9"> <input type="text" class="form-control" id="inputEmail" placeholder="Nhập email" name="tenNguoiGui" value=""> </div>
                                        </div>
                                        <div class="form-group">
                                            <label for="inputEmail3" class="col-sm-3 control-label">Số điện thoại</label>
                                            <div class="col-sm-9"> <input type="text" class="form-control" id="inputSdt" placeholder="Nhập số điện thoại" name="tenNguoiGui" value=""> </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-sm-offset-3 col-sm-9"> <button type="button" onclick="getdata()" class="btn btn-danger"><i class="MR5 fa fa-search" aria-hidden="true"></i>Tìm kiếm</button> <button type="reset" class="btn btn-default">Nhập lại</button> </div>
                                        </div>
                                    </form>
                                </div>
                                <div id="lstGopy" class="row" style="padding: 10px;">
                                    @*<div class="col-md-12">
                                            <div class="thumbnail">
                                                <div class="caption text-center row">
                                                    <div class="col-md-2">
                                                        <div class="position-relative">
                                                            <img src="https://nguoidan.chinhphu.vn/apca-pakn-portlet/images/MediaObj_Placeholder.png" style="width:72px;height:72px;" />
                                                        </div>
                                                    </div>

                                                    <div class="col-md-10">
                                                        <h4 class="thumbnail-label">Kiến nghị khắc phục ô nhiễm môi trường sông Đáy</h4>
                                                        <p><i class="glyphicon glyphicon-user light-red lighter bigger-120"></i>&nbsp;Bà Nguyễn Thị Trang</p>
                                                        <br />
                                                        <time datetime="2013-01-21" style="float: left">
                                                            22/10/2018 7:23:35 PM
                                                        </time>
                                                        <div class="thumbnail-description smaller">
                                                            <p style="margin-top: 10px; float: left; font-size: 13px;">Rất nhiều người dân ở Chương Mỹ phản ánh, ô nhiễm môi trường sông Đáy rất nghiêm trọng, đề nghị thành phố sớm có giải pháp khắc phục để phục vụ đời sống, sản xuất của nhân dân.</p>
                                                        </div>
                                                    </div>


                                                </div>
                                                <div class="caption card-footer text-center">
                                                    <ul class="list-inline" style="height: 100px;"></ul>
                                                </div>
                                            </div>
                                        </div>*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="col-md-12">
                <section class="block block_business_news">
                    <h3 class="block_title_black">CHUYÊN MỤC TIN<a href="#" class="view_all"><span><span>Tất cả tin</span></span></a></h3>
                    <div class="content">
                        <div class="right">
                            <ul id="tra-cuu-tin-chuyen-muc-content"></ul>
                        </div>
                    </div>
                </section>
            </div>
            <div class="col-md-12">
                <section class="block block_business_news">
                    <h3 class="block_title_black">TIN MỚI<a href="#" class="view_all"><span><span>Tất cả tin</span></span></a></h3>
                    <div class="content">
                        <div class="right">
                            <ul id="tra-cuu-tin-moi-content"></ul>
                        </div>
                    </div>
                </section>
            </div>
            <div class="col-md-12">
                <section class="block block_business_news">
                    <h3 class="block_title_black">TIN XEM NHIỀU<a href="#" class="view_all"><span><span>Tất cả tin</span></span></a></h3>
                    <div class="content">
                        <div class="right">
                            <ul id="tra-cuu-tin-xem-nhieu-content"></ul>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

</div>
@section Scripts {
    <script src="http://pagination.js.org/dist/2.1.4/pagination.js"></script>
    <script src="~/js/date.format.js"></script>
    <script>
        $(document).ready(function () {
            getdata();
        });

        function getdata() {
            $.ajax({
                url: appConfig.apiHostUrl + "/api/news/getNewsAno",
                data: {
                    name: $("#inputName").val(),
                    email: $("#inputEmail").val(),
                    sdt: $("#inputSdt").val(),
                },
                success: function (result) {
                    var dataContainer = $("#lstGopy");
                    $('#lstGopy').pagination({
                        dataSource: result,
                        pageSize: 5,
                        showGoInput: true,
                        showGoButton: true,
                        callback: function (data, pagination) {
                            var html = templateData(data);
                            dataContainer.html(html);
                        }
                    })
                }
            });
        }
        function templateData(data) {
            var html = '';
            for (var i = 0; i < data.length; i++) {
                var noidung = '';
                noidung = data[i].Content;
                var content = '<div class="col-md-12">';
                content += '   <div class="thumbnail">';
                content += '        <div class="caption text-center row">';
                content += '            <div class="col-md-2">';
                content += '               <div class="position-relative">';
                content += '                   <img src="https://nguoidan.chinhphu.vn/apca-pakn-portlet/images/MediaObj_Placeholder.png" style="width:72px;height:72px;" />';
                content += '               </div> </div>';

                content += '            <div class="col-md-10">';
                content += '                <h4 class="thumbnail-label">' + data[i].Name + '</h4>';
                content += '                <p><i class="glyphicon glyphicon-user light-red lighter bigger-120"></i>&nbsp;' + data[i].UserFullName + '</p>           <br />';
                content += '               <time datetime="2013-01-21" style="float: left">22/10/2018 7:23:35 PM </time></br>';
                content += '               <div class="thumbnail-description smaller">';
                content += noidung;
                content += '                 </div></div></div>';
                content += '       <div class="caption card-footer text-center">       <ul class="list-inline" style="height: 100px;"></ul>    </div>   </div></div>';

                html += content;
            }
            return html;
        }

        $.get(appConfig.apiHostUrl + "/api/News/getHomeNewsByCate?number=3", function (data, status) {
            console.log("tin chuyen muc o tra cuu: " + data.model.length);
            var content = '';
            for (var i = 0; i < data.model.length; i++) {
                if (i != data.model.length - 1) {
                    content += '<article class="border-dot">';
                    content += '<hgroup>';
                    content += '<h4 class="title"><a href="/home/detailnews?id=' + data.model[i].Id + '" >' + data.model[i].Name + '</a></h4>';
                    content += '</hgroup>';
                    content += '<p class="date">';
                    content += '<time>';
                    content += new Date(data.model[i].OnPublished).format("dd/mm/yyyy");
                    content += '</time>';
                    content += '</p>';
                    content += '<p style="line-height: 15px;">';
                    content += data.model[i].Abstract;
                    content += '...</p>';
                    content += '</article>';
                } else {
                    content += '<article>';
                    content += '<hgroup>';
                    content += '<h4 class="title"><a href="/home/detailnews?id=' + data.model[i].Id + '">' + data.model[i].Name + '</a></h4>';
                    content += '</hgroup>';
                    content += '<p class="date">';
                    content += '<time>';
                    content += new Date(data.model[i].OnPublished).format("dd/mm/yyyy");
                    content += '</time>';
                    content += '</p>';
                    content += '<p style="line-height: 15px;">';
                    content += data.model[i].Abstract;
                    content += '...</p>';
                    content += '</article>';
                }
            }
            $('#tra-cuu-tin-chuyen-muc-content').html(content);
        });

        $.get(appConfig.apiHostUrl + "/api/News/getHomeNewsByCate?id=2&number=3", function (data, status) {
            var content = '';
            for (var i = 0; i < data.model.length; i++) {
                if (i != data.model.length - 1) {
                    content += '<article class="border-dot">';
                    content += '<hgroup>';
                    content += '<h4 class="title"><a href="/home/detailnews?id=' + data.model[i].Id + '">' + data.model[i].Name + '</a></h4>';
                    content += '</hgroup>';
                    content += '<p class="date">';
                    content += '<time>';
                    content += new Date(data.model[i].OnPublished).format("dd/mm/yyyy");
                    content += '</time>';
                    content += '</p>';
                    content += '<p style="line-height: 15px;">';
                    content += data.model[i].Abstract;
                    content += '...</p>';
                    content += '</article>';
                } else {
                    content += '<article>';
                    content += '<hgroup>';
                    content += '<h4 class="title"><a href="/home/detailnews?id=' + data.model[i].Id + '">' + data.model[i].Name + '</a></h4>';
                    content += '</hgroup>';
                    content += '<p class="date">';
                    content += '<time>';
                    content += new Date(data.model[i].OnPublished).format("dd/mm/yyyy");
                    content += '</time>';
                    content += '</p>';
                    content += '<p style="line-height: 15px;">';
                    content += data.model[i].Abstract;
                    content += '...</p>';
                    content += '</article>';
                }

            }
            $('#tra-cuu-tin-moi-content').html(content);
        });

        $.get(appConfig.apiHostUrl + "/api/News/getHomeNewsByCate?id=14&number=3", function (data, status) {
            var content = '';
            for (var i = 0; i < data.model.length; i++) {
                if (i != data.model.length - 1) {
                    content += '<article class="border-dot">';
                    content += '<hgroup>';
                    content += '<h4 class="title"><a href="/home/detailnews?id=' + data.model[i].Id + '">' + data.model[i].Name + '</a></h4>';
                    content += '</hgroup>';
                    content += '<p class="date">';
                    content += '<time>';
                    content += new Date(data.model[i].OnPublished).format("dd/mm/yyyy");
                    content += '</time>';
                    content += '</p>';
                    content += '<p style="line-height: 15px;">';
                    content += data.model[i].Abstract;
                    content += '</p>';
                    content += '</article>';
                } else {
                    content += '<article>';
                    content += '<hgroup>';
                    content += '<h4 class="title"><a href="/home/detailnews?id=' + data.model[i].Id + '">' + data.model[i].Name + '</a></h4>';
                    content += '</hgroup>';
                    content += '<p class="date">';
                    content += '<time>';
                    content += new Date(data.model[i].OnPublished).format("dd/mm/yyyy");
                    content += '</time>';
                    content += '</p>';
                    content += '<p style="line-height: 15px;">';
                    content += data.model[i].Abstract;
                    content += '</p>';
                    content += '</article>';
                }
            }
            $('#tra-cuu-tin-xem-nhieu-content').html(content);
        });

    </script>
}
